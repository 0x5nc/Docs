---
title: Razor Pages with EF Core - CRUD - 2 of 10
author: rick-anderson
description: Shows how to create,read,update,delete with EF Core
keywords: ASP.NET Core,Entity Framework Core,CRUD,create,read,update,delete
ms.author: riande
manager: wpickett
ms.date: 10/15/2017
ms.topic: get-started-article
ms.technology: aspnet
ms.prod: asp.net-core
uid: data/ef-rp/crud
---
# Create, Read, Update, and Delete - EF Core with Razor Pages tutorial (2 of 10)

By [Rick Anderson](https://twitter.com/RickAndMSFT) and [Tom Dykstra](https://github.com/tdykstra)

In the [previous tutorial](xref:data/ef-rp/intro), a Razor Pages web app was created that stores and displays data using EF and SQL Server LocalDB. In this tutorial, the scaffolded CRUD (create, read, update, delete) code is reviewed and customized.

Note: It's a common practice to implement the repository pattern in order to create an abstraction layer between the UI (Razor Pages) and the data access layer. To keep these tutorials simple and focused on teaching EF, the repository pattern is not used. For information about repositories with EF, see [the last tutorial in this series](xref:data/ef-mvc/advanced).

In this tutorial, you'll work with the Create, Edit, Delete, and Details Razor Pages in the *Student* folder.

## Customize the Details page

Browse to `Pages/Students` page. The **Edit**, **Details**, and **Delete** links are generated by the [Anchor Tag Helper](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper) 
in the *Pages/Students/Index.cshtml* file.

<!--2do ricka. if Index doesn't change, remove dup -->
[!code-cshtml[Main](intro/samples/cu/Pages/Students/Index1.cshtml?range=40-44)]

Select a Details link. The URL is of the form `http://localhost:1234/Students/Details?id=2`. The Student ID is passed using a query string (`?id=2`). 

Update the Edit, Details, and Delete Razor Pages to use the `"{id:int}"` route template. Change the page directive for each of these pages from `@page` to `@page "{id:int}"`. 

A request to the page with the "{id:int}" route template that does **not** include the integer will return an HTTP 404 (not found) error. For example, `http://localhost:1234/Students/Details` will return a 404 error. To make the ID optional, append `?` to the route constraint:

 ```cshtml
@page "{id:int?}"
```
Run the app, click on a Details link and verify the URL is passing the ID as route data (`http://localhost:1234/Students/Details/2`).

<!-- See https://github.com/aspnet/Scaffolding/issues/590 -->

### Add related data

The scaffolded code for the Students Index page left out the `Enrollments` property, because that property holds a collection. In this section, the contents of the `Enrollments` collection is displayed in the Details page.

The `OnGetAsync` method of *Pages/Students/Details.cshtml.cs* uses the `SingleOrDefaultAsync` method to retrieve a single `Student` entity. Add the following highlighted code:

[!code-csharp[Main](intro/samples/cu/Pages/Students/Details.cshtml.cs?name=snippet_Details&highlight=8-12)]

The `Include` and `ThenInclude` methods cause the context to load the `Student.Enrollments` navigation property, and within each enrollment the `Enrollment.Course` navigation property.  You'll learn more about these methods in the reading related data tutorial.

The `AsNoTracking` method improves performance in scenarios when the entities returned will not be updated in the current context. `AsNoTracking` is discussed later in this tutorial.

### Display related enrollments on the Details page

Open *Pages/Students/Details.cshtml*.  Add the following highlighted code to display a list of enrollments:

 <!--2do ricka. if doesn't change, remove dup -->
[!code-cshtml[Main](intro/samples/cu/Pages/Students/Details1.cshtml?highlight=35-53)]

If code indentation is wrong after you paste the code, press CTRL-K-D to correct it.

The preceding code loops through the entities in the `Enrollments` navigation property. For each enrollment, it displays the course title and the grade. The course title is retrieved from the Course entity that's stored in the `Course` navigation property of the Enrollments entity.

Run the app, select the **Students** tab, and click the **Details** link for a student. You see the list of courses and grades for the selected student.

## Update the Create page

Update the `OnPostAsync` method in *Pages/Students/Create.cshtml.cs* with the following code:

[!code-csharp[Main](intro/samples/cu/Pages/Students/Create.cshtml.cs?name=snippet_OnPostAsync)]







>[!div class="step-by-step"]
[Previous Getting started](xref:data/ef-rp/intro)(intro.md)